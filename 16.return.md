# 第12章 Return指令

## 目标

- **return**指令是什么
- 为什么要使用**return**指令
- **return**指令该如何使用



## return的引入

还记得我们在第7章中学习的函数吗，如果印象有些模糊了，没有关系，我们先在这里复习一下什么是函数。

我们吃东西通常是一连串的动作，吃东西时，我们会依次执行以下动作：

> 1. 张嘴
> 2. 将食物送入口中
> 3. 牙齿咀嚼食物
> 4. 咽下

![eat](https://github.com/icuic/cm/raw/master/image/16_return/eat.gif)

在我们的字典中还没有“**吃**"这个字的时候，为了描述”**吃**“这个动作，我们不得不一步一步地描述以上4个动作，这样别人才能理解我们在说什么。

为了使用方便，我们创造了”**吃**“这个字，这下就方便多了，我们只要提到"**吃**”这个字，别人就会知道我其实是在说以上4个动作了。

在这个例子了，我们其实就是定义了一个名字为“**吃**”的函数。

在这个函数里面，我们依次执行了上面的4个动作。

如果我们是在吃**苹果**，那么**苹果**就是**吃**这个函数的参数。如果是在吃**香蕉**，那么，**香蕉**就是**吃**的参数。即吃什么，什么就是吃（函数）的参数。

上述就是我们之前所学习的有关函数的全部内容了。

在**吃**完之后，我们是不是还会得到一个**结论**——这个东西好吃还是不好吃？

这里说到的结论，其实就是我们即将学习的关于函数的新知识——**return**.

## 生活场景中的return

**return**的中文意思是**返回**。

我们拿生活中的两个例子来类比一下return的用法。

> 你去参加考试，在考完之后，你会得到你的考试成绩。

![take_exam](https://github.com/icuic/cm/raw/master/image/16_return/take_exam.gif)

在这个例子中，我们就可以把**参加考试**看成是一个函数。因为**参加考试**其实是包含了一系列的动作。

在最后，我们会得到考试成绩。我们可以看做考试成绩就是**参加考试**这个函数**return**回来的。

再来看一个例子。

> 动物园举行拔河比赛，最后小鸭子赢得了比赛。

![timg](https://github.com/icuic/cm/raw/master/image/16_return/timg.gif)

小鸭子是冠军，这就是**return**回来的关于这场拔河比赛的结果。



## 如何使用return指令

通常地，我们做某件事情，最后会得到一个关于这件事情的结果（考试成绩、比赛结果等），在程序中，这个结果就需要由**return**给返回回来。

**return**通常位于函数的末尾，如下：

> 函数名 = (参数)
>
> ....待执行指令
>
> ....return 结果

以上就是增加了**return**指令的函数。

在执行了第2行的**待执行指令**之后，最后会由**return**返回结果。

当然，对于不需要返回结果的函数，我们可以不写**return**指令。



## 关卡实例

我们来看第14-3关。

![challenges_14_3](https://github.com/icuic/cm/raw/master/image/16_return/challenges_14_3.jpg)

和以住关卡不同的是，这一关有左右两个休息区。

小猴子在捡香蕉的过程中，这只可恶的黑猩猩会不停地攻击它，向它扔石头。

一旦小猴子的生命值小于50之后，它必须奔向离它最近的那个休息区补充能量。如果它错误地跑向了那个离它较远的休息区，那么，极有可能在它还没有到达时，它仅剩的一点生命值就被耗完了。

所以，关键时刻，在这两个休息区中，选择离它最近那一个非常重要。

这就是本关解题的关键。

这就需要用到本章所学的**return**指令，在小猴子的生命值小于50之后，立即分别计算它与两个休息区的距离，从中选择离它近的那一个返回回来。

我们直接看代码：

> #nearestZone函数需要传回我们离哪个休息区更近
> #小猴离哪个更近
> nearestZone = () ->
>     d0 = distanceTo healthZones[0]
>     d1 = distanceTo healthZones[1]
>     if d0 < d1
>         **return** healthZones[0]
>     else
>         **return** healthZones[1]
>
> for b in bananas
>     goto b
>     if health() < 50
>         zone = nearestZone()
>         goto zone
>         until health() == 100
>             wait()

上述的代码中，**nearestZone**函数会通过**return**指令回离小猴子最近的那一个休息区。

在得到返回值后，小猴子就可以赶紧去补充能量了。

我们来看一下通关动画。

![solution_14_3](https://github.com/icuic/cm/raw/master/image/16_return/solution_14_3.gif)



## 小结

- **return**用来返回结果
- 对于没有结果需要返回的函数，**return**可以省略



## 作业

- 故事模式161 - 175 关

- 进阶模式 14-1 - 14-15关

  注意，一定要确保所有关卡都是三星通关。



好物推荐

![IMG_7327](https://github.com/icuic/cm/raw/master/image/16_return/IMG_7327.PNG)